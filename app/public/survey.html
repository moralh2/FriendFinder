<!DOCTYPE html>
<html>

<head>
    <title>Survey</title>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!--CDN for JQuery-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>

<body>

    <div class="container">

        <div class="row">
            <div class="col s12">
                <div class="card deep-purple accent-33">
                    <div class="card-content white-text">
                        <span class="card-title">Welcome to the FriendFinder Survey</span>
                        <p>Please read each of the statements,</p>
                        <p>To then indicate the level of agreement,</p>
                        <p>Or perhaps disagreement,</p>
                        <p>With each notion presented.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <form id="survey-form" class="col s12">

                <div class="input-field col s12">
                    <input id="name" type="text" class="validate">
                    <label for="name">Name</label>
                </div>

                <div id="question-1" class="input-field col s12">
                    <select>
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">Option 1</option>
                        <option value="2">Option 2</option>
                        <option value="3">Option 3</option>
                        <option value="4">Option 4</option>
                        <option value="5">Option 5</option>
                    </select>
                    <label>Question 1</label>
                </div>

                <div id="question-2" class="input-field col s12">
                    <select>
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">Option 1</option>
                        <option value="2">Option 2</option>
                        <option value="3">Option 3</option>
                        <option value="4">Option 4</option>
                        <option value="5">Option 5</option>
                    </select>
                    <label>Question 2</label>
                </div>

                <div id="question-3" class="input-field col s12">
                    <select>
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">Option 1</option>
                        <option value="2">Option 2</option>
                        <option value="3">Option 3</option>
                        <option value="4">Option 4</option>
                        <option value="5">Option 5</option>
                    </select>
                    <label>Question 3</label>
                </div>

                <a id="form-submit" class="waves-effect waves-light btn">Submit</a>

            </form>
        </div>

    </div>

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <!-- Init JS Components (Select) from Materialize, listener for form post  -->
    <script type="text/javascript">
        $(document).ready(function () {
            $("select").formSelect();
        });

        $("#form-submit").on("click", function (event) {
            var questionCount = 3
            event.preventDefault();
            var scoresArray = []

            for (i = 1; i <= questionCount; i++) {
                questionValue = $("#question-" + i + " option:selected").val();
                scoresArray.push(questionValue)
            }

            var newFriend = {
                name: $("#name").val().trim(),
                photo: "some-url",
                scores: scoresArray
            };

            console.log(newFriend);

            $.post("/api/friends", newFriend, function (data) {
                if (data) {
                    alert("Yay! Your form was submitted!");
                }

                $("#name").val("");
                $("select").val("");
                $("select").formSelect();
            });

        });
    </script>

</body>

</html>